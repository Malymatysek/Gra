/*
 * LogicGame.h
 *
 *  Created on: 5 sie 2024
 *      Author: Matys
 */
#include <iostream>
#include <vector>
#include "Lottery.h"

// #define DEBUG_LOGIC
using namespace std;

class LogicGame : public Lottery
{
public:
	int tabWin[NR_PAY_LINE][NR_ROW]; // 0 sign / 1 multiplier/ 2 rate
	
	enum SIGN
	{
		SCATTER = 0,
		CHERRY = 1,
		LEMON = 2,
		ORANGE = 3,
		PLUM = 4,
		GRAPES = 5,
		WATERLEMON = 6,
		SEVEN = 7,
	};
private:
	enum WIN_RATES
	{
		Val_0_25 = 0,
		Val_1 = 1,
		Val_2_5 = 2,
		Val_2 = 3,
		Val_5 = 4,
		Val_10 = 5,
		Val_25 = 6,
		Val_50 = 7,
		Val_250 = 8,
	};
	enum BONUS
	{
		_x2 = 2,
		_x3 = 3,
		_x4 = 4,
		_x5 = 5,
	};
// static constexpr double Rates[NR_COLUMN][NR_SYMBOLS] = {
// //Scattrr/Cherry/lemon/orange//plum//grape/waterm/seven
// {     0,     0,    0,      0, 	  0,     0,     0,   0    },//x1
// {     0,  0.25,    0,      0,     0,     0,     0,   0    },//2
// {  2.00,  1.00, 1.00,   1.00,  1.00,  2.50,  2.50, 	 5.00 },//x3
// { 10.00,  2.50, 2.50,   2.50,  2.50, 10.00, 10.00,  50.00 },//x4
// { 50.00, 10.00, 10.00, 10.00, 10.00, 25.00, 25.00, 250.00 } //x5
// };
	static constexpr int Rates[NR_COLUMN][NR_SYMBOLS] = 
	{
     //|Scattrr|Cherry|lemon|orange|plum|grape|waterm|seven
		{    0,    0,    0,    0,    0,    0,    0,     0 },// x1
		{    0,   25,    0,    0,    0,    0,    0,     0 },// 2
		{  200,  100,  100,  100,  100,  250,  250,   500 },// x3
		{ 1000,  250,  250,  250,  250, 1000, 1000,  5000 },// x4
		{ 5000, 1000, 1000, 1000, 1000, 2500, 2500, 25000 } // x5
	};

	static constexpr bool CheckLineWin[NR_PAY_LINE][NR_ROW][NR_COLUMN] =
	{
		{
			{0,0,0,0,0},
			{1,1,1,1,1}, 
			{0,0,0,0,0}
		}, //1
		{
			{1,1,1,1,1},
			{0,0,0,0,0},
			{0,0,0,0,0}
		}, //2
		{
			{0,0,0,0,0}, 
			{0,0,0,0,0}, 
			{1,1,1,1,1}
		}, //3
		{
			{0,0,1,0,0},
			{1,1,0,1,1},
			{0,0,0,0,0}
		}, //4
		{
			{1,0,0,0,1},
			{0,1,0,1,0},
			{0,0,1,0,0}
		}, //5
		{
			{0,0,1,0,0},
			{0,1,0,1,0},
			{1,0,0,0,1}
		}, //6
		{
			{0,1,0,1,0},
			{1,0,1,0,1},
			{0,0,0,0,0}
		}, //7
		{
			{0,0,0,0,0},
			{1,0,1,0,1},
			{0,1,0,1,0}
		}, //8
		{
			{1,1,0,0,0},
			{0,0,1,0,0},
			{0,0,0,1,1}
		}, //9
		{
			{0,0,0,1,1}, 
			{0,0,1,0,0}, 
			{1,1,0,0,0}
		}, //10
		{
			{0,0,1,0,0},
			{0,1,0,1,1},
			{1,0,0,0,0}
		}, //11
		{
			{0,0,1,1,1},
			{0,1,0,0,0},
			{1,0,0,0,0}
		}, //12
		{
			{1,0,0,0,0},
			{0,1,0,0,0},
			{0,0,1,1,1}
		}, //13
		{
			{1,0,0,0,0},
			{0,1,0,1,1},
			{0,0,1,0,0}
		}, //14
		{
			{1,0,1,0,1},
			{0,1,0,1,0},
			{0,0,0,0,0}
		}, //15
		{
			{0,0,0,0,0},
			{0,1,0,1,0},
			{1,0,1,0,1}
		}, //16
		{
			{1,1,0,0,0},
			{0,0,1,1,1},
			{0,0,0,0,0}
		}, //17
		{
			{0,0,0,0,0},
			{0,0,1,1,1},
			{1,1,0,0,0}
		}, //18
		{
			{0,0,0,0,1},
			{0,0,0,1,0},
			{1,1,1,0,0}
		}, //19
		{
			{1,1,1,0,0},
			{0,0,0,1,0},
			{0,0,0,0,1}
		}  //20

	}; 
	static constexpr int PayLine[NR_PAY_LINE][NR_COLUMN] =
	{
		{0,0,0,0,0},//0
		{2,2,2,2,2},//1
		{1,1,1,1,1},//2
		{3,3,3,3,3},//3
		{2,2,1,2,2},//4
		{3,2,1,2,3},//5
		{2,1,2,1,2},//6
		{2,3,2,3,2},//7
		{1,1,2,3,3},//8
		{3,3,2,1,1},//9
		{3,2,1,2,2},//10
		{3,2,1,1,1},//11
		{1,2,3,3,3},//12
		{1,2,3,2,2},//13
		{1,2,1,2,1},//14
		{3,2,3,2,3},//15
		{1,1,2,2,2},//16
		{1,1,2,2,2},//17
		{3,3,2,2,2},//18
		{3,3,3,2,1},//19
		{1,1,1,2,3} //20
	};

public:

	LogicGame();

	void		showWinLine();
	void 		oneLotteryResult(); 

	void		checkScatter();
	void		checkPayLine(int iterator);

	void 	staticTabCheck(vector<int> tab);
	double  getMoneyLine(int symbol_win, int multiplier_win);
};